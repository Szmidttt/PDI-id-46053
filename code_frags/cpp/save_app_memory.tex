\begin{lstlisting}[language=C++,caption={Zapisywanie pamiÄ™ci aplikacji w C++ (nsTestCrasher.cpp)}]
char testData[32];

extern "C" NS_EXPORT uint64_t SaveAppMemory() {
  for (size_t i = 0; i < sizeof(testData); i++) 
    testData[i] = i;

  FILE* fp = fopen("crash-addr", "w");
  if (!fp) return 0;
  fprintf(fp, "%p\n", (void*)testData);
  fclose(fp);

  return (int64_t)testData;
}
\end{lstlisting}

